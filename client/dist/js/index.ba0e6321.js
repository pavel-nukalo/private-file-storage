(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={index:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("71ec"),s=a.n(r);s.a},"0bc8":function(e,t,a){e.exports=a.p+"img/logo_white.28fff3d0.png"},"1de5":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("6672"),a("d1e7");var r=a("2b0e"),s=a("bc3a"),n=a.n(s);let i={};const o=n.a.create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get(){return o}},$axios:{get(){return o}}})},r["a"].use(Plugin);Plugin;var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("app-navbar"),a("v-content",[a("v-snackbar",{attrs:{value:e.error,timeout:0,color:"error"}},[e._v("\n      "+e._s(e.error)+"\n    ")]),a("router-view",{key:e.$route.fullPath})],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[e._l(e.items,(function(t){return[r("v-list-item",{key:t.text,attrs:{to:t.path,link:""},on:{click:function(e){t.click&&t.click()}}},[r("v-list-item-action",[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("\n              "+e._s(t.text)+"\n            ")])],1)],1)]}))],2)],1),r("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,dark:"",app:"",color:"blue"}},[r("v-btn",{staticClass:"ml-0",attrs:{icon:""},on:{click:function(t){return t.stopPropagation(),e.toggleDrawer(t)}}},[r("v-icon",[e._v("fa-bars")])],1),r("v-toolbar-title",{staticClass:"ml-3"},[r("span",{staticClass:"hidden-sm-and-down ml-2"},[e._v("Private File Storage")])]),r("v-spacer"),r("v-btn",{staticClass:"mr-3",attrs:{icon:""}},[r("v-avatar",{attrs:{size:"30",tile:""}},[r("v-img",{attrs:{src:a("0bc8")}})],1)],1),e.processing?r("v-progress-linear",{staticClass:"mt-0",staticStyle:{bottom:"-4px"},attrs:{indeterminate:!0,color:"blue",absolute:""}}):e._e()],1)],1)},p=[],d=a("2f62"),h={data(){return{}},computed:{isUserAuthenticated(){return this.$store.getters.isUserAuthenticated},processing(){return this.$store.getters.getProcessing},email(){return this.$store.getters.getUserEmail},drawer:{get(){return this.$store.getters.getDrawer},set(e){this.setDrawer(e)}},items(){return this.isUserAuthenticated?[{icon:"file_copy",text:"Files",path:{path:"/files"}},{icon:"account_circle",text:"User info",path:{path:"/user"}},{icon:"clear",text:"Logout",click:this.signout}]:[{icon:"input",text:"Signin",path:{path:"/signin"}},{icon:"how_to_reg",text:"Signup",path:{path:"/signup"}}]}},methods:{...Object(d["b"])(["setDrawer","toggleDrawer"]),async signout(){await this.$store.dispatch("signout"),this.$router.push("/signin")}}},m=h,f=(a("f5a2"),a("2877")),v=a("6544"),g=a.n(v),b=a("40dc"),w=a("8212"),_=a("8336"),k=a("132d"),y=a("adda"),x=a("8860"),C=a("da13"),V=a("1800"),P=a("5d23"),E=a("f774"),$=a("8e36"),F=a("2fa4"),T=a("2a7f"),A=Object(f["a"])(m,u,p,!1,null,"5c949f2a",null),D=A.exports;g()(A,{VAppBar:b["a"],VAvatar:w["a"],VBtn:_["a"],VIcon:k["a"],VImg:y["a"],VList:x["a"],VListItem:C["a"],VListItemAction:V["a"],VListItemContent:P["a"],VListItemTitle:P["b"],VNavigationDrawer:E["a"],VProgressLinear:$["a"],VSpacer:F["a"],VToolbarTitle:T["a"]});var U={data(){return{}},components:{AppNavbar:D},computed:{error(){return this.$store.getters.getError}}},S=U,j=(a("034f"),a("7496")),O=a("a75b"),I=a("2db4"),B=Object(f["a"])(S,l,c,!1,null,null,null),L=B.exports;g()(B,{VApp:j["a"],VContent:O["a"],VSnackbar:I["a"]});var z=a("8c4f"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"blue",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Authentication")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{placeholder:" ",label:"Email",name:"email","prepend-icon":"mail_outline",type:"text",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{placeholder:" ",label:"Password",name:"password","prepend-icon":"lock_open",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{dark:!e.processing,color:"blue",disabled:e.processing},on:{click:function(t){return t.preventDefault(),e.signin(t)}}},[e._v("\n            Signin\n          ")])],1)],1)],1)],1)],1)},R=[],q={data(){return{email:"",password:""}},computed:{error(){return this.$store.getters.getError},processing(){return this.$store.getters.getProcessing}},methods:{async signin(){const e=await this.$store.dispatch("signin",{email:this.email,password:this.password});e&&this.$router.push("/")}}},N=q,J=a("b0af"),G=a("99d9"),H=a("62ad"),K=a("a523"),Q=a("4bd4"),W=a("0fd9"),X=a("8654"),Y=a("71d9"),Z=Object(f["a"])(N,M,R,!1,null,null,null),ee=Z.exports;g()(Z,{VBtn:_["a"],VCard:J["a"],VCardActions:G["a"],VCardText:G["b"],VCol:H["a"],VContainer:K["a"],VForm:Q["a"],VRow:W["a"],VSpacer:F["a"],VTextField:X["a"],VToolbar:Y["a"],VToolbarTitle:T["a"]});var te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"blue",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Create new user")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{placeholder:" ",label:"Email",name:"email","prepend-icon":"mail_outline",type:"text",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{placeholder:" ",label:"Password",name:"password","prepend-icon":"lock_open",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{dark:!e.processing,color:"blue",disabled:e.processing},on:{click:function(t){return t.preventDefault(),e.signup(t)}}},[e._v("\n            Register\n          ")])],1)],1)],1)],1)],1)},ae=[],re={data(){return{email:"",password:""}},computed:{error(){return this.$store.getters.getError},processing(){return this.$store.getters.getProcessing}},methods:{async signup(){const e=await this.$store.dispatch("signup",{email:this.email,password:this.password});e&&this.$router.push("/")}}},se=re,ne=Object(f["a"])(se,te,ae,!1,null,null,null),ie=ne.exports;g()(ne,{VBtn:_["a"],VCard:J["a"],VCardActions:G["a"],VCardText:G["b"],VCol:H["a"],VContainer:K["a"],VForm:Q["a"],VRow:W["a"],VSpacer:F["a"],VTextField:X["a"],VToolbar:Y["a"],VToolbarTitle:T["a"]});var oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[e._v("File list")]),a("v-data-table",{staticClass:"elevation-1 mt-3",attrs:{headers:e.headers,items:e.files,"hide-default-footer":""},scopedSlots:e._u([{key:"item.uploaded",fn:function(t){var a=t.item;return[e._v("\n        "+e._s(new Date(a.uploaded).toLocaleString("en-US"))+"\n      ")]}},{key:"item.actions",fn:function(t){var r=t.item;return[a("v-btn",{staticClass:"blue",attrs:{to:"/files/"+r.id,small:"",dark:""}},[e._v("\n          Select\n        ")])]}}])}),a("v-layout",{staticClass:"mt-3",attrs:{column:""}},[a("v-select",{attrs:{items:[5,10,15],label:"Items per page",outlined:""},model:{value:e.itemsPerPage,callback:function(t){e.itemsPerPage=t},expression:"itemsPerPage"}}),a("v-pagination",{attrs:{length:e.pageCount,"next-icon":"arrow_forward","prev-icon":"arrow_back"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("v-layout",{attrs:{column:""}},[a("v-file-input",{staticClass:"mb-0",attrs:{"prepend-icon":"attach_file","show-size":"",label:"File input"},model:{value:e.selectedFile,callback:function(t){e.selectedFile=t},expression:"selectedFile"}}),a("v-col",{staticClass:"pl-2 pt-0"},[a("v-btn",{attrs:{color:"success",dark:""},on:{click:e.uploadFile}},[e._v("\n          Upload\n          "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("cloud_upload")])],1)],1)],1)],1)],1)},le=[],ce={data(){return{files:[],page:1,itemsPerPage:10,itemsCount:0,headers:[{text:"ID",align:"left",value:"id"},{text:"Name",value:"name"},{text:"Uploaded",value:"uploaded"},{text:"Actions",value:"actions",align:"right"}],selectedFile:null}},computed:{pageCount(){return Math.ceil(this.itemsCount/this.itemsPerPage)}},mounted(){this.fetchData()},methods:{async fetchData(){const e=await this.$store.dispatch("api",{method:"get",url:`/file/list?page=${this.page}&list_size=${this.itemsPerPage}`});e.count&&(this.itemsCount=e.count),e.files&&(this.files=e.files)},async uploadFile(){if(!this.selectedFile)return;const e=new FormData;e.append("sampleFile",this.selectedFile);const t=await this.$store.dispatch("api",{method:"post",url:"/file/upload",data:e});t&&t.status&&(this.files.length<this.itemsPerPage&&this.files.push(t.data),this.itemsCount++)}},watch:{pageCount(){this.page>this.pageCount&&(this.page=this.pageCount)},page(){this.fetchData()},itemsPerPage(){this.fetchData()}}},ue=ce,pe=a("8fea"),de=a("23a7"),he=a("a722"),me=a("891e"),fe=a("b974"),ve=Object(f["a"])(ue,oe,le,!1,null,null,null),ge=ve.exports;g()(ve,{VBtn:_["a"],VCol:H["a"],VContainer:K["a"],VDataTable:pe["a"],VFileInput:de["a"],VIcon:k["a"],VLayout:he["a"],VPagination:me["a"],VSelect:fe["a"]});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-btn",{staticClass:"mb-3 mt-3",attrs:{color:"blue",dark:""},on:{click:function(t){return e.$router.go(-1)}}},[a("v-icon",{attrs:{left:""}},[e._v("arrow_back")]),e._v("\n    Back to file list\n  ")],1),a("v-card",{staticClass:"mx-auto mt-5"},[a("v-card-text",[a("div",[e._v("File info")]),a("p",{staticClass:"display-1 text--primary"},[e._v("\n        "+e._s(e.file.name)+"\n      ")]),a("p",[e._v("\n        ID: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.file.id))])]),a("p",[e._v("\n        MD5: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.file.md5))])]),a("p",[e._v("\n        Extension: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.file.extname))])]),a("p",[e._v("\n        MIME type: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.file.mimetype))])]),a("p",[e._v("\n        Size: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.file.size/1e3)+" kB")])]),a("p",[e._v("\n        Uploaded: "),a("span",{staticClass:"text--primary"},[e._v(e._s(new Date(e.file.uploaded).toLocaleString("en-US"))+" kB")])])]),a("v-card-actions",[a("v-btn",{attrs:{dark:"",color:"blue"},on:{click:e.downloadFile}},[e._v("\n        Download\n      ")]),a("v-btn",{attrs:{color:"blue",dark:""},on:{click:e.updateFile}},[e._v("\n        Update\n        "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("cloud_upload")])],1),a("v-btn",{attrs:{dark:"",color:"red"},on:{click:e.deleteFile}},[e._v("\n        Delete\n      ")])],1),a("v-card-actions",[a("v-file-input",{staticClass:"mb-0",attrs:{"prepend-icon":"attach_file","show-size":"",label:"File input"},model:{value:e.selectedFile,callback:function(t){e.selectedFile=t},expression:"selectedFile"}})],1)],1)],1)},we=[],_e=a("19de"),ke=a.n(_e),ye={data(){return{file:{id:"",md5:"",name:"",extname:"",mimetype:"",size:0,uploaded:null},selectedFile:null}},mounted(){this.fetchData()},methods:{async fetchData(){const e=await this.$store.dispatch("api",{method:"get",url:"/file/"+this.$route.path.replace("/files/","")});e&&(this.file=e)},async deleteFile(){const e=await this.$store.dispatch("api",{method:"delete",url:"/file/delete/"+this.$route.path.replace("/files/","")});e&&e.status&&this.$router.push("/files")},async updateFile(){if(!this.selectedFile)return;const e=new FormData;e.append("sampleFile",this.selectedFile);const t=await this.$store.dispatch("api",{method:"put",url:"/file/update/"+this.file.id,data:e});t&&t.status&&(this.file=t.data)},async downloadFile(){const e=await this.$store.dispatch("api",{method:"get",url:"/file/download/"+this.file.id,responseType:"arraybuffer"});e&&ke()(e,this.file.name)}}},xe=ye,Ce=Object(f["a"])(xe,be,we,!1,null,null,null),Ve=Ce.exports;g()(Ce,{VBtn:_["a"],VCard:J["a"],VCardActions:G["a"],VCardText:G["b"],VContainer:K["a"],VFileInput:de["a"],VIcon:k["a"]});var Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"mx-auto mt-5"},[a("v-card-text",[a("div",[e._v("User info")]),a("p",{staticClass:"mt-3 mb-0"},[e._v("\n        Email: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.user.email))])]),a("p",[e._v("\n        ID: "),a("span",{staticClass:"text--primary"},[e._v(e._s(e.user.id))])])])],1)],1)},Ee=[],$e={data(){return{user:{id:"",email:""}}},mounted(){this.fetchData()},methods:{async fetchData(){const e=await this.$store.dispatch("api",{method:"get",url:"/info"});e&&(this.user=e.data)}}},Fe=$e,Te=Object(f["a"])(Fe,Pe,Ee,!1,null,null,null),Ae=Te.exports;g()(Te,{VCard:J["a"],VCardText:G["b"],VContainer:K["a"]});const De=e=>t=>t[e],Ue=e=>(t,a)=>t[e]=a,Se=e=>t=>t[e]=!t[e],je={processing:!1,error:null,drawer:null},Oe={getProcessing:De("processing"),getError:De("error"),getDrawer:De("drawer")},Ie={setProcessing:Ue("processing"),setError:Ue("error"),cleanError:e=>e.error=null,setDrawer:Ue("drawer"),toggleDrawer:Se("drawer")},Be={async api({commit:e,getters:t},a){e("setProcessing",!0),e("cleanError");let r=null;try{const s=await n()(Object.assign({headers:{Authorization:`Bearer ${t.getToken}`}},a));r=s.data}catch(s){const t=s&&s.response&&s.response.data&&s.response.data.message;e("setError",t||"An error occurred while accessing API")}finally{e("setProcessing",!1)}return r}};var Le={state:je,getters:Oe,mutations:Ie,actions:Be};const ze={isAuthenticated:!1,token:null,refreshToken:null},Me={isUserAuthenticated:De("isAuthenticated"),getToken:De("token"),getRefreshToken:De("refreshToken")},Re={setUserAuthenticated:Ue("isAuthenticated"),setToken:Ue("token"),setRefreshToken:Ue("refreshToken")},qe={async signin({commit:e},{email:t,password:a}){e("setProcessing",!0),e("cleanError");try{const{data:r}=await n.a.post("/signin",{email:t,password:a});return e("setUserAuthenticated",!0),e("setUserEmail",t),e("setToken",r.token),e("setRefreshToken",r.refreshToken),r.status}catch(r){const t=r&&r.response&&r.response.data&&r.response.data.message;e("setError",t||"Error! The email address or password you entered is incorrect.")}finally{e("setProcessing",!1)}},async signup({commit:e},{email:t,password:a}){e("setProcessing",!0),e("cleanError");try{const{data:r}=await n.a.post("/signup",{email:t,password:a});return e("setUserAuthenticated",!0),e("setUserEmail",t),e("setToken",r.token),e("setRefreshToken",r.refreshToken),r.status}catch(r){let t=r&&r.response&&r.response.data&&r.response.data.errors&&r.response.data.errors[0]&&"Email is incorrect";t=t||r&&r.response&&r.response.data.message,e("setError",t||"Error! Check the validity of the entered data.")}finally{e("setProcessing",!1)}},async signout({commit:e,getters:t}){e("setProcessing",!0),e("cleanError");try{await n()({method:"GET",url:"/logout",headers:{Authorization:`Bearer ${t.getToken}`}})}catch(a){e("setError","An error occurred while logging out. Perhaps the session has expired.")}e("setUserAuthenticated",!1),e("setUserEmail",""),e("setToken",null),e("setRefreshToken",null),e("setProcessing",!1)}};var Ne={state:ze,getters:Me,mutations:Re,actions:qe};const Je={email:""},Ge={getUserEmail:De("email")},He={setUserEmail:Ue("email")};var Ke={state:Je,getters:Ge,mutations:He};r["a"].use(d["a"]);const Qe=new d["a"].Store({modules:{app:Le,authentication:Ne,user:Ke}});var We=Qe;r["a"].use(z["a"]);const Xe=(e,t,a)=>{if(!We.getters.isUserAuthenticated)return a();a({name:"Files"})},Ye=(e,t,a)=>{if(We.getters.isUserAuthenticated)return a();a({name:"Signin"})};var Ze=new z["a"]({routes:[{path:"/signin",name:"Signin",component:ee,beforeEnter:Xe},{path:"/signup",name:"Signup",component:ie,beforeEnter:Xe},{path:"/",redirect:"/files",beforeEnter:Ye},{path:"/files",name:"Files",component:ge,beforeEnter:Ye},{path:"/files/*",name:"File",component:Ve,beforeEnter:Ye},{path:"/user",name:"User",component:Ae,beforeEnter:Ye}]}),et=a("f309");r["a"].use(et["a"]);var tt=new et["a"]({icons:{iconfont:"mdi"}});r["a"].config.productionTip=!1,new r["a"]({router:Ze,store:We,vuetify:tt,render:e=>e(L)}).$mount("#app")},6672:function(e,t,a){},"71ec":function(e,t,a){},f5a2:function(e,t,a){"use strict";var r=a("1de5"),s=a.n(r);s.a}});
//# sourceMappingURL=index.ba0e6321.js.map